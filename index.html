<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <title>whispers + hearts ¬∑ valentine</title>
  <!-- Google Fonts ‚Äì clean, modern, sans-serif -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,300;14..32,400;14..32,500;14..32,600&display=swap" rel="stylesheet">
  <!-- canvas-confetti for celebration -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      background: linear-gradient(145deg, #ffd1dc 0%, #ffb6c1 100%);
      transition: background 0.6s ease;
      position: relative;
    }

    /* floating hearts ‚Äì subtle & elegant */
    .heart-mist {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .heart {
      position: absolute;
      color: rgba(255, 255, 255, 0.3);
      font-size: 1.4rem;
      user-select: none;
      animation: float 8s linear infinite;
      bottom: -10vh;
      filter: drop-shadow(0 0 4px rgba(255, 180, 200, 0.3));
    }

    @keyframes float {
      0% { transform: translateY(0) rotate(0deg); opacity: 0; }
      10% { opacity: 0.9; }
      100% { transform: translateY(-120vh) rotate(10deg); opacity: 0; }
    }

    /* main container ‚Äì screens layer nicely */
    .screen-container {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 5;
    }

    .screen {
      position: absolute;
      width: 100%;
      max-width: 680px;
      padding: 2rem 2rem;
      background: rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border-radius: 48px;
      box-shadow: 0 25px 50px -8px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.2);
      text-align: center;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s ease, visibility 0.5s;
      pointer-events: none;
      border: 1px solid rgba(255,255,255,0.25);
    }

    .screen.active {
      opacity: 1;
      visibility: visible;
      pointer-events: all;
    }

    /* headings & text */
    h1 {
      font-weight: 500;
      font-size: clamp(2.2rem, 8vw, 3.4rem);
      letter-spacing: -0.02em;
      color: #4a1e2b;
      text-shadow: 0 2px 6px rgba(255, 220, 230, 0.6);
      margin-bottom: 2rem;
      line-height: 1.2;
    }

    .hint {
      margin-top: 2.2rem;
      font-size: 1.2rem;
      font-weight: 350;
      color: #631e32;
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(2px);
      display: inline-block;
      padding: 0.5rem 1.4rem;
      border-radius: 60px;
      border: 1px solid rgba(255,255,255,0.5);
      box-shadow: 0 4px 12px rgba(255, 180, 180, 0.2);
    }

    /* button group (for initial) */
    .button-group {
      display: flex;
      gap: 1.8rem;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      position: relative;
    }

    .btn {
      font-family: 'Inter', sans-serif;
      font-weight: 500;
      font-size: 1.8rem;
      padding: 1rem 2.8rem;
      border: none;
      border-radius: 80px;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      box-shadow: 0 15px 30px -10px rgba(180, 60, 80, 0.4), 0 2px 0 0 rgba(255,255,240,0.6) inset;
      color: #751c34;
      cursor: pointer;
      transition: all 0.2s ease;
      border: 1px solid rgba(255, 240, 240, 0.7);
      letter-spacing: 0.5px;
      min-width: 150px;
    }

    .btn:hover {
      transform: scale(1.04);
      background: rgba(255, 255, 255, 0.9);
      box-shadow: 0 22px 36px -12px #b3435e;
    }

    /* NO button special movement */
    .no-btn {
      transition: transform 0.35s cubic-bezier(0.2, 0.9, 0.3, 1.2), background 0.2s, box-shadow 0.2s;
      will-change: transform;
      position: relative; /* keeps layout, transform moves visual */
      z-index: 20;
      background: rgba(255, 235, 235, 0.8);
      color: #a12342;
    }

    /* agreement screen */
    .agreement-text {
      font-size: 2rem;
      font-weight: 460;
      color: #2f0e1a;
      margin-bottom: 1.8rem;
    }

    .agreement-list {
      text-align: left;
      max-width: 500px;
      margin: 0 auto 2rem auto;
      padding-left: 1.8rem;
      list-style-type: "‚ù§Ô∏è ";
      font-size: 1.2rem;
      line-height: 1.9;
      color: #3e1b26;
      font-weight: 380;
    }

    .agreement-list li {
      margin-bottom: 0.6rem;
      padding-left: 0.5rem;
    }

    .effective {
      font-size: 1.4rem;
      font-weight: 500;
      margin-bottom: 2rem;
      color: #a52a4a;
    }

    /* final screen */
    .dancing-gif {
      width: 220px;
      max-width: 70%;
      border-radius: 40px;
      margin: 1.5rem 0 1.2rem;
      box-shadow: 0 25px 35px -10px rgba(160, 60, 70, 0.5);
      background: rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(4px);
      border: 2px solid rgba(255,255,255,0.5);
    }

    .final-message {
      font-size: 1.7rem;
      font-weight: 400;
      color: #3f1423;
      background: rgba(255, 255, 240, 0.4);
      backdrop-filter: blur(4px);
      display: inline-block;
      padding: 0.8rem 2rem;
      border-radius: 60px;
    }

    /* small screens */
    @media (max-width: 500px) {
      .screen { padding: 2rem 1rem; }
      .btn { font-size: 1.6rem; padding: 0.9rem 1.8rem; min-width: 120px; }
      .agreement-list { font-size: 1rem; }
    }

    /* hide screens initially handled by .active */
  </style>
</head>
<body id="bodyGradient">
  <!-- floating hearts background (minimal) -->
  <div class="heart-mist" id="heartContainer"></div>

  <!-- main interchangeable screens -->
  <div class="screen-container">
    <!-- initial proposal screen -->
    <div class="screen active" id="initialScreen">
      <h1>Will you be my Valentine?</h1>
      <div class="button-group">
        <button class="btn yes-btn" id="yesInitial">YES</button>
        <button class="btn no-btn" id="noBtn">NO üíî</button>
      </div>
      <div class="hint">Hint: The ‚ÄúNo‚Äù button is a bit shy‚Ä¶ üòè</div>
    </div>

    <!-- agreement screen (hidden initially) -->
    <div class="screen" id="agreementScreen">
      <div class="agreement-text">By clicking YES you agree to:</div>
      <ul class="agreement-list">
        <li>Unlimited cuddles, surprise hugs & soft kisses</li>
        <li>Random chocolates, stolen hoodies & shared desserts</li>
        <li>Listening, understanding & never invalidating your feelings</li>
        <li>Growing together ‚Äî dreams, struggles & everything in between</li>
        <li>Being deeply loved by someone who‚Äôs serious about you</li>
      </ul>
      <div class="effective">Effective immediately!</div>
      <button class="btn yes-btn" id="yesAgreement">YES</button>
    </div>

    <!-- final celebration screen (hidden initially) -->
    <div class="screen" id="finalScreen">
      <h1>Yay! üéâ<br>Good Choice!</h1>
      <!-- cute dancing character GIF (stretching & shaking) -->
      <img class="dancing-gif" src="https://media.tenor.com/3w3I8W4f9c0AAAAi/cute-dance.gif" alt="Dancing bunny stretching and shaking">
      <p class="final-message">That's the best decision you have ever made! ‚ù§Ô∏è</p>
    </div>
  </div>

  <script>
    (function() {
      // ---- DOM elements ----
      const bodyEl = document.getElementById('bodyGradient');
      const initialScreen = document.getElementById('initialScreen');
      const agreementScreen = document.getElementById('agreementScreen');
      const finalScreen = document.getElementById('finalScreen');
      const yesInitial = document.getElementById('yesInitial');
      const yesAgreement = document.getElementById('yesAgreement');
      const noBtn = document.getElementById('noBtn');
      const heartContainer = document.getElementById('heartContainer');

      // ---- state ----
      let noClickCount = 0;                // tracks NO clicks
      const gradients = [
        'linear-gradient(145deg, #ffd1dc, #ffb6c1)',
        'linear-gradient(145deg, #fbc1cb, #f8a5b5)',
        'linear-gradient(145deg, #fec8cd, #ffb0b9)',
        'linear-gradient(145deg, #ffd9e2, #ffa5b7)',
        'linear-gradient(145deg, #ffe4ec, #ffb3c6)',
        'linear-gradient(145deg, #fdd4df, #fd9eb0)'
      ];
      let gradientIndex = 0;

      // ---- helper: change background with smooth transition (already via body transition) ----
      function setNextGradient() {
        gradientIndex = (gradientIndex + 1) % gradients.length;
        bodyEl.style.background = gradients[gradientIndex];
      }

      // ---- generate floating hearts (minimal, reactive) ----
      function createHearts(count = 14) {
        for (let i = 0; i < count; i++) {
          const heart = document.createElement('span');
          heart.className = 'heart';
          heart.innerHTML = '‚ô•'; // classic heart
          heart.style.left = Math.random() * 100 + '%';
          heart.style.animationDelay = Math.random() * 8 + 's';
          heart.style.fontSize = (0.9 + Math.random() * 1.6) + 'rem';
          heart.style.animationDuration = (6 + Math.random() * 10) + 's';
          heart.style.opacity = 0.3 + Math.random() * 0.3;
          heartContainer.appendChild(heart);
        }
      }
      createHearts(18);

      // ---- move NO button randomly on hover (visible & smooth) ----
      function moveNoButtonAway() {
        if (!noBtn) return;
        const btn = noBtn;
        const rect = btn.getBoundingClientRect();
        const winW = window.innerWidth;
        const winH = window.innerHeight;

        // button dimensions
        const btnW = rect.width;
        const btnH = rect.height;

        // random target position (top-left) so that whole button stays inside viewport
        const maxX = winW - btnW;
        const maxY = winH - btnH;
        const targetX = Math.max(0, Math.min(maxX, Math.random() * maxX));
        const targetY = Math.max(0, Math.min(maxY, Math.random() * maxY));

        // current position (relative to viewport)
        const currentX = rect.left;
        const currentY = rect.top;

        // delta = target - current, applied as transform
        const deltaX = targetX - currentX;
        const deltaY = targetY - currentY;

        btn.style.transform = `translate(${deltaX}px, ${deltaY}px)`;
      }

      // attach hover (mouseenter) to NO button
      if (noBtn) {
        noBtn.addEventListener('mouseenter', function(e) {
          moveNoButtonAway();
        });
      }

      // ---- NO click logic ----
      if (noBtn) {
        noBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          // increment counter
          noClickCount++;
          // after 2 clicks, change emoji (from üíî to üò≠)
          if (noClickCount === 2) {
            noBtn.innerHTML = 'NO üò≠';
          } else if (noClickCount > 2) {
            // keep üò≠
            noBtn.innerHTML = 'NO üò≠';
          }
          // change background gradient smoothly
          setNextGradient();

          // NO button still moves on hover ‚Äì no extra action needed
        });
      }

      // ---- YES (initial) -> show agreement screen ----
      yesInitial.addEventListener('click', function() {
        // hide initial, show agreement
        initialScreen.classList.remove('active');
        agreementScreen.classList.add('active');
        // optional: reset any NO transform (clean)
        if (noBtn) noBtn.style.transform = 'translate(0px, 0px)';
      });

      // ---- YES (agreement) -> confetti + final screen ----
      yesAgreement.addEventListener('click', function() {
        // hide agreement screen smoothly
        agreementScreen.classList.remove('active');

        // trigger confetti for 5 seconds
        const confettiDuration = 5000; // ms
        const confettiInterval = setInterval(() => {
          confetti({
            particleCount: 3,
            spread: 80,
            origin: { y: 0.6 },
            colors: ['#ff8fa3', '#ffb3c6', '#ffe0e5', '#ffffff', '#f7a1b5']
          });
        }, 120);

        // stop confetti after 5 sec, then show final
        setTimeout(() => {
          clearInterval(confettiInterval);
          // additional final burst
          confetti({ particleCount: 20, spread: 100, origin: { y: 0.5 } });
          // show final screen
          finalScreen.classList.add('active');
        }, confettiDuration);
      });

      // ---- if final screen appears, we are done ----

      // ---- ensure NO button never goes off-screen on resize (reposition if needed) ----
      window.addEventListener('resize', function() {
        if (!noBtn) return;
        // if NO button is transformed, we may need to keep it inside. 
        // simplest: reset transform to avoid going out-of-bounds? but we lose playful effect.
        // Better: read current computed transform and adjust? for simplicity and fairness,
        // we reposition to a safe random location.
        if (initialScreen.classList.contains('active')) {
          // only move if initial screen is active (NO visible)
          moveNoButtonAway();
        }
      });

      // ---- extra: reposition NO if it ever gets out of view after resize (additional safety) ----
      // also after orientation change
      window.addEventListener('orientationchange', function() {
        if (initialScreen.classList.contains('active') && noBtn) {
          setTimeout(() => moveNoButtonAway(), 50);
        }
      });

      // ---- small detail: prevent NO button from being clicked when it's moving (just UX) ----
      // (already fine)

      // ---- background gradient also changes on each NO click, already done ----

      // ---- on final screen, if user wants to go back? no option, that's fine ----

      // ---- fallback if GIF doesn't load ----
      const gifImg = document.querySelector('.dancing-gif');
      if (gifImg) {
        gifImg.addEventListener('error', function() {
          // replace with a simple text or local animation? but keep it minimal
          this.src = 'data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'200\' height=\'200\' viewBox=\'0 0 100 100\'%3E%3Ccircle cx=\'50\' cy=\'50\' r=\'40\' fill=\'%23ffb6c1\' /%3E%3Ctext x=\'28\' y=\'70\' font-size=\'40\' fill=\'%23ffffff\'%3E‚ù§Ô∏è%3C/text%3E%3C/svg%3E';
        });
      }

      // ---- extra touch: after two NOs, still keep moving ----
      // (no extra code needed)

      // ---- if user clicks NO many times, background continues changing ----
      // also gradient changes with setNextGradient

      // ---- prevent accidental double-tap zoom on buttons ----
      const allBtns = document.querySelectorAll('.btn');
      allBtns.forEach(btn => {
        btn.addEventListener('touchstart', (e) => {
          e.preventDefault(); // just to avoid zoom, but keep clickable
        }, { passive: false });
      });

    })();
  </script>
</body>
</html>